= form_with model: menu_item, local: true, multipart: true, class: "space-y-8" do |f|
  - if menu_item.errors.any?
    .bg-red-50.border.border-red-200.p-4.rounded
      h2.text-red-700.font-semibold= "#{pluralize(menu_item.errors.count, 'error')} prohibited saving:"
      ul.list-disc.list-inside.mt-2
        - menu_item.errors.full_messages.each do |msg|
          li.text-red-600= msg

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Menu Item Details â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  .grid.grid-cols-1.sm:grid-cols-2.gap-6
    .space-y-1
      = f.label :name, class: "block text-sm font-medium text-gray-700"
      = f.text_field :name, class: "mt-1 block w-full rounded border-gray-300 focus:ring-indigo-500"

    .space-y-1
      = f.label :description, class: "block text-sm font-medium text-gray-700"
      = f.text_area :description, rows: 3, class: "mt-1 block w-full rounded border-gray-300 focus:ring-indigo-500"

    .space-y-1
      = f.label :price, class: "block text-sm font-medium text-gray-700"
      = f.number_field :price, step: 0.01, class: "mt-1 block w-full rounded border-gray-300 focus:ring-indigo-500"

  hr.border-gray-200

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Food Images â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  .space-y-4
    h3.text-lg.font-medium Food Images
    = f.label :new_food_images, 'Upload New:', class: "block text-sm font-medium text-gray-700"
    = file_field_tag 'menu_item[new_food_images][]', multiple: true, accept: 'image/*', class: "block w-full text-sm text-gray-600"

    - if menu_item.food_images.any?
      .grid.grid-cols-3.gap-4
        - menu_item.food_images.each do |img|
          .border.rounded overflow-hidden
            = image_tag img.file.variant(resize_to_limit: [200,200]), class: "w-full h-32 object-cover"
            .p-2.text-xs.text-gray-600
              p= "Uploaded: #{img.created_at.to_date}"
              p= "By: #{img.user.name}"
              p= "Title: #{img.title.presence || 'â€”'}"
              p= "Desc: #{truncate(img.description, length: 30)}"
              .mt-1
                = f.fields_for :images, img do |ii|
                  = ii.hidden_field :id
                  = ii.check_box :_destroy
                  = ii.label :_destroy, "Remove", class: "ml-1 text-red-500 text-xs"

  hr.border-gray-200

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Hearts & Reviews â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  .flex.items-center.justify-between
    .text-sm.text-gray-700
      | Hearts:
      span.font-medium.ml-1= menu_item.hearts.count
      = button_to (menu_item.hearts.exists?(user: current_user) ? 'ğŸ’”' : 'â¤ï¸'),
              polymorphic_path([menu_item, Heart.new]),
              method: :post,
              class: "ml-4"
    .text-sm.text-gray-700
      | Avg Rating:
      span.font-medium.ml-1= (menu_item.reviews.average(:rating)&.round(1) || 0) + " / 5"

  .flex.justify-end.space-x-4
    = link_to 'Back to Menu', restaurant_path(menu_item.restaurant), class: "px-4 py-2 bg-gray-200 rounded hover:bg-gray-300"
    = f.submit 'Save Item', class: "px-6 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700"
